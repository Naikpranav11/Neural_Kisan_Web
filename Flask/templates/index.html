<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="{{url_for('static', filename='style/style.css')}}">
    <link rel="stylesheet" href="/static/style/style.css">
    
  </head>
  <body draggable="false">

    <div id="bg"></div>
    
    <nav>
      <h1>Neural Kissan</h1>
      <span class="material-symbols-outlined"  onclick="ColorMode()" id="ColorMode">
        dark_mode
        </span>
      <h4><a href="../../NeuralKisssanDocumentation/my-app/src/app.html">Docs  </a></h4>
    </nav>
    <main>
<section id="monitors">
  <div class="card">
    <h3 class="cardTop">Temperature</h3>
    <div>
      <canvas id="TemperatureChart"></canvas>
    </div>
  </div>

  <div class="card">
    <h3 class="cardTop">Moisture</h3>
    <div>
      <canvas id="MoistureChart"></canvas>
    </div>
  </div>

  <div class="card">
    <h3 class="cardTop">pH</h3>
    <div>
      <canvas id="pHChart"></canvas>
    </div>
  </div>

  <div class="card">
    <h3 class="cardTop">Humidity</h3>
    <div>
      <canvas id="HumidityChart"></canvas>
    </div>
  </div>

  <div class="card">
    <h3 class="cardTop">AQI</h3>
    <div>
      <canvas id="AQIChart"></canvas>
    </div>
  </div>

</section>
<section id="TerminalMonitor">
  <div id="Terminal" class="card">
    <h3 class="cardTop">Terminal</h3>
    <div>
      
      
    <pre id="TerminalTextBox"><span id="TerminalLine"></span></pre>
    </div>
  </div>
</section>

   

    </main>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="../static/js/ColorMode.js"></script>
<script src="../static/js/chartInit.js"></script>
<script src="../static/js/Terminal.js"></script>
  <script>

  let size=50;//size of array 
   
    setInterval(a,1000)
    function a(){
      Update(TemperatureChart,'temperature')
      Update(MoistureChart,'moisture')
      Update(pHChart,'ph')
      Update(HumidityChart,'humidity')
      Update(AQIChart,'aqi')
    }
    function Update(chart,type){
      


      fetch('/api')
      .then((response) => response.json())
      .then((data) => {
        rand=(data[type]['value'])
        chart.data.datasets.forEach((dataset) => {
        dataset.data.push(rand+Math.random());
        if(dataset.data.length>size){
          dataset.data.shift();
        }
     });
     chart.update()
    });
      

     


      
      
    }
    

    


 
  </script>
</html>
